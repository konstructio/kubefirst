version: "3"

services:

  kubefirst:
    platform: linux/amd64
    build:
      context: .
      dockerfile: ./build/Dockerfile
    container_name: kubefirst
    env_file:
      - .env
    environment:
      TERM: xterm-256color
    ports:
      - "8080:8080" # ArgoCD
      - "8888:8888" # GitLab
      - "8200:8200" # Vault
    volumes:
      - ./:/opt/kubefirst
      # AWS credentials are strictly used to provision the Kubefirst in your AWS account
      - $HOME/.aws:/home/developer/.aws
    command: sh -c "./scripts/kubefirst.sh"
